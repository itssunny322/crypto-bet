{"ast":null,"code":"var _jsxFileName = \"/home/siddharth/new/crypto-bet/src/components/home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport DAIABI from \"../abis/DAI.json\";\nimport BetABI from \"../abis/Bet.json\";\nimport BetOracleABI from \"../abis/BetOracle.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [defaultAccount, setDefaultAccount] = useState(null);\n  const [userBalance, setUserBalance] = useState(null);\n  const [userDAIbalance, setuserDAIbalance] = useState(null);\n  const [connButtonText, setConnButtonText] = useState(\"Connect Wallet\");\n  const [allBettableEvents, setAllBettableEvents] = useState([]);\n  const [eventDetail, setEventDetail] = useState([]);\n  const DAIContractAddress = process.env.REACT_APP_DAI_CONTRACT_ADDRESS;\n  const BetContractAddress = process.env.REACT_APP_Bet_CONTRACT_ADDRESS;\n  const BetOracleContractAddress = process.env.REACT_APP_BetOracle_CONTRACT_ADDRESS;\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const signer = provider.getSigner();\n  useEffect(() => {\n    showBettableEvents();\n\n    for (let i = 0; i < allBettableEvents.length; i++) {\n      console.log(allBettableEvents[i], \"d\");\n      showEventDetails(allBettableEvents[i]);\n      console.log(eventDetail, \"hi\");\n    }\n  }, [defaultAccount]);\n\n  const connectWalletHandler = async () => {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      console.log(\"MetaMask Here!\");\n      window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      }).then(result => {\n        setDefaultAccount(result[0]);\n        setConnButtonText(\"Wallet Connected\");\n        getAccountBalance(result[0]);\n        showBalance();\n        showBettableEvents();\n      }).catch(error => {\n        setErrorMessage(error.message);\n      });\n    } else {\n      console.log(\"Need to install MetaMask\");\n      setErrorMessage(\"Please install MetaMask browser extension to interact\");\n    }\n  }; // update account, will cause reload the page\n\n\n  const accountChangedHandler = () => {\n    window.location.reload();\n  };\n\n  const getAccountBalance = account => {\n    window.ethereum.request({\n      method: \"eth_getBalance\",\n      params: [account, \"latest\"]\n    }).then(balance => {\n      setUserBalance(ethers.utils.formatEther(balance));\n    }).catch(error => {\n      setErrorMessage(error.message);\n    });\n  };\n\n  const chainChangedHandler = () => {\n    // reload the page to avoid any errors with chain change mid use of application\n    window.location.reload();\n  };\n\n  const showBalance = async () => {\n    await provider.send(\"eth_requestAccounts\", []);\n    const signerAddress = await signer.getAddress();\n    const daiContract = new ethers.Contract(DAIContractAddress, DAIABI, signer);\n    const balance = await daiContract.balanceOf(signerAddress);\n    setuserDAIbalance(ethers.utils.formatEther(balance));\n    console.log(\"Balance:\", balance);\n  };\n\n  const showBettableEvents = async () => {\n    const betContract = new ethers.Contract(BetContractAddress, BetABI, signer);\n    const betOracleContract = new ethers.Contract(BetOracleContractAddress, BetOracleABI, signer);\n    const events = await betContract.getBettableEvents();\n    console.log(\"Events:\", events);\n    setAllBettableEvents(events);\n  };\n\n  const showEventDetails = async eventId => {\n    const betContract = new ethers.Contract(BetContractAddress, BetABI, signer);\n    const betOracleContract = new ethers.Contract(BetOracleContractAddress, BetOracleABI, signer);\n    const event = await betContract.getEvent(eventId);\n    setEventDetail([...eventDetail, event]);\n  }; // listen for account changes\n\n\n  window.ethereum.on(\"accountsChanged\", accountChangedHandler);\n  window.ethereum.on(\"chainChanged\", chainChangedHandler);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Circle Bet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"walletCard\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: connectWalletHandler,\n        children: connButtonText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"accountDisplay\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Address: \", defaultAccount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"balanceDisplay\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Balance (Eth): \", userBalance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"balanceDisplay\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Balance (DAI): \", userDAIbalance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"eventsDisplay\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Bettable Events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: allBettableEvents.map(event => {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [event, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => showEventDetails(event),\n              children: \"Click here to get details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }, this), eventDetail && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [\"Category : \", eventDetail.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\" Match between : \", eventDetail.teamAname, \" VS \", eventDetail.teamBname]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 16\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this)]\n          }, event, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"tShVhgly/IqvpNovbJT4QJRcsTU=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/siddharth/new/crypto-bet/src/components/home.js"],"names":["React","useState","useEffect","ethers","DAIABI","BetABI","BetOracleABI","Home","errorMessage","setErrorMessage","defaultAccount","setDefaultAccount","userBalance","setUserBalance","userDAIbalance","setuserDAIbalance","connButtonText","setConnButtonText","allBettableEvents","setAllBettableEvents","eventDetail","setEventDetail","DAIContractAddress","process","env","REACT_APP_DAI_CONTRACT_ADDRESS","BetContractAddress","REACT_APP_Bet_CONTRACT_ADDRESS","BetOracleContractAddress","REACT_APP_BetOracle_CONTRACT_ADDRESS","provider","providers","Web3Provider","window","ethereum","signer","getSigner","showBettableEvents","i","length","console","log","showEventDetails","connectWalletHandler","isMetaMask","request","method","then","result","getAccountBalance","showBalance","catch","error","message","accountChangedHandler","location","reload","account","params","balance","utils","formatEther","chainChangedHandler","send","signerAddress","getAddress","daiContract","Contract","balanceOf","betContract","betOracleContract","events","getBettableEvents","eventId","event","getEvent","on","map","name","teamAname","teamBname"],"mappings":"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","sourcesContent":["import React, { useState ,useEffect} from \"react\";\nimport { ethers } from \"ethers\";\n\nimport DAIABI from \"../abis/DAI.json\";\nimport BetABI from \"../abis/Bet.json\";\nimport BetOracleABI from \"../abis/BetOracle.json\";\n\nconst Home = () => {\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [defaultAccount, setDefaultAccount] = useState(null);\n  const [userBalance, setUserBalance] = useState(null);\n  const [userDAIbalance, setuserDAIbalance] = useState(null);\n  const [connButtonText, setConnButtonText] = useState(\"Connect Wallet\");\n  const [allBettableEvents, setAllBettableEvents] = useState([]);\n  const [eventDetail, setEventDetail] = useState([]);\n\n  const DAIContractAddress = process.env.REACT_APP_DAI_CONTRACT_ADDRESS;\n  const BetContractAddress = process.env.REACT_APP_Bet_CONTRACT_ADDRESS;\n  const BetOracleContractAddress =\n    process.env.REACT_APP_BetOracle_CONTRACT_ADDRESS;\n\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const signer = provider.getSigner();\n\nuseEffect(()=>{\n  showBettableEvents();\n for (let i = 0; i< allBettableEvents.length; i++){\n   console.log(allBettableEvents[i],\"d\")\n   showEventDetails(allBettableEvents[i]);\n  console.log(eventDetail,\"hi\")\n }\n\n},[defaultAccount])\n\n\n  const connectWalletHandler = async () => {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      console.log(\"MetaMask Here!\");\n\n      window.ethereum\n        .request({ method: \"eth_requestAccounts\" })\n        .then((result) => {\n          setDefaultAccount(result[0]);\n          setConnButtonText(\"Wallet Connected\");\n          getAccountBalance(result[0]);\n          showBalance();\n          showBettableEvents();\n        })\n        .catch((error) => {\n          setErrorMessage(error.message);\n        });\n    } else {\n      console.log(\"Need to install MetaMask\");\n      setErrorMessage(\"Please install MetaMask browser extension to interact\");\n    }\n  };\n\n  // update account, will cause reload the page\n  const accountChangedHandler = () => {\n    window.location.reload();\n  };\n\n  const getAccountBalance = (account) => {\n    window.ethereum\n      .request({ method: \"eth_getBalance\", params: [account, \"latest\"] })\n      .then((balance) => {\n        setUserBalance(ethers.utils.formatEther(balance));\n      })\n      .catch((error) => {\n        setErrorMessage(error.message);\n      });\n  };\n\n  const chainChangedHandler = () => {\n    // reload the page to avoid any errors with chain change mid use of application\n    window.location.reload();\n  };\n\n  const showBalance = async () => {\n    await provider.send(\"eth_requestAccounts\", []);\n    const signerAddress = await signer.getAddress();\n    const daiContract = new ethers.Contract(DAIContractAddress, DAIABI, signer);\n    const balance = await daiContract.balanceOf(signerAddress);\n    setuserDAIbalance(ethers.utils.formatEther(balance));\n    console.log(\"Balance:\", balance);\n  };\n\n  const showBettableEvents = async () => {\n    const betContract = new ethers.Contract(BetContractAddress, BetABI, signer);\n    const betOracleContract = new ethers.Contract(\n      BetOracleContractAddress,\n      BetOracleABI,\n      signer\n    );\n    const events = await betContract.getBettableEvents();\n    console.log(\"Events:\", events);\n    setAllBettableEvents(events);\n  };\n\n  const showEventDetails = async (eventId) => {\n    const betContract = new ethers.Contract(BetContractAddress, BetABI, signer);\n    const betOracleContract = new ethers.Contract(\n      BetOracleContractAddress,\n      BetOracleABI,\n      signer\n    );\n    const event = await betContract.getEvent(eventId);\n    setEventDetail([...eventDetail,event]);\n  };\n\n  // listen for account changes\n  window.ethereum.on(\"accountsChanged\", accountChangedHandler);\n\n  window.ethereum.on(\"chainChanged\", chainChangedHandler);\n\n  return (\n    <div className=\"home\">\n      <h1>Circle Bet</h1>\n\n      <div className=\"walletCard\">\n        <button onClick={connectWalletHandler}>{connButtonText}</button>\n        <div className=\"accountDisplay\">\n          <h3>Address: {defaultAccount}</h3>\n        </div>\n        <div className=\"balanceDisplay\">\n          <h3>Balance (Eth): {userBalance}</h3>\n        </div>\n        <div className=\"balanceDisplay\">\n          <h3>Balance (DAI): {userDAIbalance}</h3>\n        </div>\n      </div>\n\n      <div className=\"eventsDisplay\">\n        <h3>Bettable Events</h3>\n        <ul>\n          {allBettableEvents.map((event) => {\n           \n            return (\n              <li key={event}>\n                <h3>{event} </h3>\n                <button onClick={() => showEventDetails(event)}>\n                  Click here to get details\n                </button>\n                {eventDetail &&\n                <div>\n                  <br/>\n                <h3>Category : {eventDetail.name}</h3>\n                <br/>\n               <p> Match between : {eventDetail.teamAname} VS {eventDetail.teamBname}</p>\n                <br/>\n                </div>\n                }\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}