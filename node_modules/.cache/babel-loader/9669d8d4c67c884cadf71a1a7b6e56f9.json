{"ast":null,"code":"var _jsxFileName = \"/home/siddharth/new/crypto-bet/src/components/home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport DAIABI from \"../abis/DAI.json\";\nimport BetABI from \"../abis/Bet.json\";\nimport BetOracleABI from \"../abis/BetOracle.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [defaultAccount, setDefaultAccount] = useState(null);\n  const [userBalance, setUserBalance] = useState(null);\n  const [userDAIbalance, setuserDAIbalance] = useState(null);\n  const [connButtonText, setConnButtonText] = useState(\"Connect Wallet\");\n  const [allBettableEvents, setAllBettableEvents] = useState([]);\n  const [eventDetail, setEventDetail] = useState([]);\n  const DAIContractAddress = process.env.REACT_APP_DAI_CONTRACT_ADDRESS;\n  const BetContractAddress = process.env.REACT_APP_Bet_CONTRACT_ADDRESS;\n  const BetOracleContractAddress = process.env.REACT_APP_BetOracle_CONTRACT_ADDRESS;\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const signer = provider.getSigner();\n  useEffect(() => {\n    showBettableEvents();\n\n    for (let i = 0; i < allBettableEvents.length; i++) {\n      showEventDetails(allBettableEvents[i]);\n    }\n  }, [defaultAccount]);\n\n  const connectWalletHandler = async () => {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      console.log(\"MetaMask Here!\");\n      window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      }).then(result => {\n        setDefaultAccount(result[0]);\n        setConnButtonText(\"Wallet Connected\");\n        getAccountBalance(result[0]);\n        showBalance();\n        showBettableEvents();\n        console.log(defaultAccount, \"DA\");\n        localStorage.setItem(\"account\", defaultAccount);\n      }).catch(error => {\n        setErrorMessage(error.message);\n      });\n    } else {\n      console.log(\"Need to install MetaMask\");\n      setErrorMessage(\"Please install MetaMask browser extension to interact\");\n    }\n  }; // update account, will cause reload the page\n\n\n  const accountChangedHandler = () => {\n    window.location.reload();\n  };\n\n  const getAccountBalance = account => {\n    window.ethereum.request({\n      method: \"eth_getBalance\",\n      params: [account, \"latest\"]\n    }).then(balance => {\n      setUserBalance(ethers.utils.formatEther(balance));\n    }).catch(error => {\n      setErrorMessage(error.message);\n    });\n  };\n\n  const chainChangedHandler = () => {\n    // reload the page to avoid any errors with chain change mid use of application\n    window.location.reload();\n  };\n\n  const showBalance = async () => {\n    await provider.send(\"eth_requestAccounts\", []);\n    const signerAddress = await signer.getAddress();\n    const daiContract = new ethers.Contract(DAIContractAddress, DAIABI, signer);\n    const balance = await daiContract.balanceOf(signerAddress);\n    setuserDAIbalance(ethers.utils.formatEther(balance));\n    console.log(\"Balance:\", balance);\n  };\n\n  const showBettableEvents = async () => {\n    const betContract = new ethers.Contract(BetContractAddress, BetABI, signer);\n    const betOracleContract = new ethers.Contract(BetOracleContractAddress, BetOracleABI, signer);\n    const events = await betContract.getBettableEvents(); //console.log(\"Events:\", events);\n\n    setAllBettableEvents(events);\n  };\n\n  const showEventDetails = async eventId => {\n    const betContract = new ethers.Contract(BetContractAddress, BetABI, signer);\n    const betOracleContract = new ethers.Contract(BetOracleContractAddress, BetOracleABI, signer);\n    const event = await betContract.getEvent(eventId); //setArray(oldArray => [...oldArray,newValue] );\n\n    setEventDetail(eventDetail => [...eventDetail, event]);\n  }; // listen for account changes\n\n\n  window.ethereum.on(\"accountsChanged\", accountChangedHandler);\n  window.ethereum.on(\"chainChanged\", chainChangedHandler);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Circle Bet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"walletCard\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: connectWalletHandler,\n        children: connButtonText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"accountDisplay\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Address: \", defaultAccount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"balanceDisplay\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Balance (Eth): \", userBalance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"balanceDisplay\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Balance (DAI): \", userDAIbalance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Bettable Events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          class: \"table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Teams\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Bet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: eventDetail.map(e => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: e.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [e.teamAname, \" VS \", e.teamBname]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 7\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-success\",\n                    children: \"Bet\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 7\n                }, this)]\n              }, e.eventId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 7\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"tShVhgly/IqvpNovbJT4QJRcsTU=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/siddharth/new/crypto-bet/src/components/home.js"],"names":["React","useState","useEffect","ethers","DAIABI","BetABI","BetOracleABI","Home","errorMessage","setErrorMessage","defaultAccount","setDefaultAccount","userBalance","setUserBalance","userDAIbalance","setuserDAIbalance","connButtonText","setConnButtonText","allBettableEvents","setAllBettableEvents","eventDetail","setEventDetail","DAIContractAddress","process","env","REACT_APP_DAI_CONTRACT_ADDRESS","BetContractAddress","REACT_APP_Bet_CONTRACT_ADDRESS","BetOracleContractAddress","REACT_APP_BetOracle_CONTRACT_ADDRESS","provider","providers","Web3Provider","window","ethereum","signer","getSigner","showBettableEvents","i","length","showEventDetails","connectWalletHandler","isMetaMask","console","log","request","method","then","result","getAccountBalance","showBalance","localStorage","setItem","catch","error","message","accountChangedHandler","location","reload","account","params","balance","utils","formatEther","chainChangedHandler","send","signerAddress","getAddress","daiContract","Contract","balanceOf","betContract","betOracleContract","events","getBettableEvents","eventId","event","getEvent","on","map","e","name","teamAname","teamBname"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\n\nimport DAIABI from \"../abis/DAI.json\";\nimport BetABI from \"../abis/Bet.json\";\nimport BetOracleABI from \"../abis/BetOracle.json\";\n\nconst Home = () => {\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [defaultAccount, setDefaultAccount] = useState(null);\n  const [userBalance, setUserBalance] = useState(null);\n  const [userDAIbalance, setuserDAIbalance] = useState(null);\n  const [connButtonText, setConnButtonText] = useState(\"Connect Wallet\");\n  const [allBettableEvents, setAllBettableEvents] = useState([]);\n  const [eventDetail, setEventDetail] = useState([]);\n\n  const DAIContractAddress = process.env.REACT_APP_DAI_CONTRACT_ADDRESS;\n  const BetContractAddress = process.env.REACT_APP_Bet_CONTRACT_ADDRESS;\n  const BetOracleContractAddress =\n    process.env.REACT_APP_BetOracle_CONTRACT_ADDRESS;\n\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const signer = provider.getSigner();\n\n  useEffect(() => {\n    showBettableEvents();\n    for (let i = 0; i < allBettableEvents.length; i++) {\n      showEventDetails(allBettableEvents[i]);\n    }\n  }, [defaultAccount]);\n\n  const connectWalletHandler = async () => {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      console.log(\"MetaMask Here!\");\n\n      window.ethereum\n        .request({ method: \"eth_requestAccounts\" })\n        .then((result) => {\n          setDefaultAccount(result[0]);\n          setConnButtonText(\"Wallet Connected\");\n          getAccountBalance(result[0]);\n          showBalance();\n          showBettableEvents();\n          console.log(defaultAccount,\"DA\")\n          localStorage.setItem(\"account\",defaultAccount)\n        })\n        .catch((error) => {\n          setErrorMessage(error.message);\n        });\n    } else {\n      console.log(\"Need to install MetaMask\");\n      setErrorMessage(\"Please install MetaMask browser extension to interact\");\n    }\n  };\n\n  // update account, will cause reload the page\n  const accountChangedHandler = () => {\n    window.location.reload();\n  };\n\n  const getAccountBalance = (account) => {\n    window.ethereum\n      .request({ method: \"eth_getBalance\", params: [account, \"latest\"] })\n      .then((balance) => {\n        setUserBalance(ethers.utils.formatEther(balance));\n      })\n      .catch((error) => {\n        setErrorMessage(error.message);\n      });\n  };\n\n  const chainChangedHandler = () => {\n    // reload the page to avoid any errors with chain change mid use of application\n    window.location.reload();\n  };\n\n  const showBalance = async () => {\n    await provider.send(\"eth_requestAccounts\", []);\n    const signerAddress = await signer.getAddress();\n    const daiContract = new ethers.Contract(DAIContractAddress, DAIABI, signer);\n    const balance = await daiContract.balanceOf(signerAddress);\n    setuserDAIbalance(ethers.utils.formatEther(balance));\n    console.log(\"Balance:\", balance);\n  };\n\n  const showBettableEvents = async () => {\n    const betContract = new ethers.Contract(BetContractAddress, BetABI, signer);\n    const betOracleContract = new ethers.Contract(\n      BetOracleContractAddress,\n      BetOracleABI,\n      signer\n    );\n    const events = await betContract.getBettableEvents();\n    //console.log(\"Events:\", events);\n    setAllBettableEvents(events);\n  };\n\n  const showEventDetails = async (eventId) => {\n    const betContract = new ethers.Contract(BetContractAddress, BetABI, signer);\n    const betOracleContract = new ethers.Contract(\n      BetOracleContractAddress,\n      BetOracleABI,\n      signer\n    );\n    const event = await betContract.getEvent(eventId);\n    //setArray(oldArray => [...oldArray,newValue] );\n    setEventDetail(eventDetail => [...eventDetail, event]);\n  };\n\n  // listen for account changes\n  window.ethereum.on(\"accountsChanged\", accountChangedHandler);\n\n  window.ethereum.on(\"chainChanged\", chainChangedHandler);\n\n  return (\n    <div className=\"home\">\n      <h1>Circle Bet</h1>\n\n      <div className=\"walletCard\">\n        <button onClick={connectWalletHandler}>{connButtonText}</button>\n        <div className=\"accountDisplay\">\n          <h3>Address: {defaultAccount}</h3>\n        </div>\n        <div className=\"balanceDisplay\">\n          <h3>Balance (Eth): {userBalance}</h3>\n        </div>\n        <div className=\"balanceDisplay\">\n          <h3>Balance (DAI): {userDAIbalance}</h3>\n        </div>\n      </div>\n\n      <div>\n        <h3>Bettable Events</h3>\n        <ul>\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Category</th>\n                <th scope=\"col\">Teams</th>\n                <th scope=\"col\">Bet</th>\n              </tr>\n            </thead>\n            <tbody>\n   {eventDetail.map(e =>{\n     return(\n      <tr key={e.eventId}>\n     \n      <td>{e.name}</td>\n      <td>{e.teamAname} VS {e.teamBname}</td>\n      <td><button className=\"btn btn-success\">Bet</button></td>\n    </tr>\n     )\n   })}\n    </tbody>\n          </table>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}